{% extends 'base.html.twig' %}

{% block title %}Statistiques RÃ©clamations{% endblock %}

{% block body %}
<div class="container my-5">

    <!-- ðŸ”™ Boutons haut de page -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <a href="{{ path('reclamation_index') }}" class="btn btn-outline-black rounded-pill text-dark">
            â¬… Retour Ã  la gestion des rÃ©clamations
        </a>

        <a href="{{ path('reclamation_stats_pdf') }}" class="btn btn-outline-danger rounded-pill text-dark">
            ðŸ“„ Exporter en PDF
        </a>
    </div>

    <!-- ðŸ§¾ Titre -->
    <h2 class="text-center mb-4">ðŸ“Š Statistiques des rÃ©clamations</h2>

    <!-- ðŸ“ˆ Graphique -->
    <canvas id="reclamationChart" height="100"></canvas>

</div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('reclamationChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['En attente', 'En cours', 'FermÃ©e'],
            datasets: [{
                label: 'Nombre de rÃ©clamations',
                data: [
                    {{ counts['En attente'] }},
                    {{ counts['En cours'] }},
                    {{ counts['FermÃ©e'] }}
                ],
                backgroundColor: ['#f1c40f', '#3498db', '#2ecc71']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false },
                title: {
                    display: true,
                    text: 'RÃ©partition des statuts',
                    color: '#333',
                    font: { size: 18 }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        precision: 0
                    }
                }
            }
        }
    });
</script>
{% endblock %}
