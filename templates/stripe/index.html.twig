{% extends 'base.html.twig' %}

{% block body %}
<script src="https://js.stripe.com/v3/"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("{{ path('create_checkout_session') }}", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
        })
        .then(res => res.json())
        .then(data => {
            const stripe = Stripe("{{ STRIPE_PUBLIC_KEY }}");
            stripe.redirectToCheckout({ sessionId: data.id });
        });
    });
</script>
{% endblock %}