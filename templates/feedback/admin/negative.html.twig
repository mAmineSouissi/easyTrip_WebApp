{% extends 'admin/base.html.twig' %}

{% block title %}Feedbacks N√©gatifs - Admin{% endblock %}

{% block body %}
<div class="section bg-light py-5">
  <div class="container">

    <!-- üîô Retour -->
    <div class="mb-4 d-flex justify-content-between align-items-center">
      <h2 class="fw-bold text-danger">
        <i class="fa fa-exclamation-triangle"></i> Feedbacks N√©gatifs
      </h2>
      <a href="{{ path('feedback_home_admin') }}" class="btn btn-outline-dark rounded-pill">
        ‚¨Ö Retour √† l'accueil
      </a>

    

    </div>

    {% if feedbacks is not empty %}
      <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center">
          <thead class="table-danger">
            <tr>
              <th>Message</th>
              <th>Note</th>
              <th>Date</th>
              <th>Utilisateur</th>
              <th>Type</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for feedback in feedbacks %}
              <tr>
                <td>{{ feedback.message }}</td>
                <td>{{ feedback.rating }}/5</td>
                <td>{{ feedback.date ? feedback.date|date('Y-m-d') : '‚Äî' }}</td>
                <td>
                  {{ feedback.user ? feedback.user.email : '‚Äî' }}<br>
                  <span class="badge bg-warning text-dark">‚ö† N√©gatif</span>
                </td>
                <td>
                  {% if feedback.hotel %}
                    üè® H√¥tel
                  {% elseif feedback.ticket %}
                    ‚úàÔ∏è Ticket
                  {% elseif feedback.travel %}
                    üåç Voyage
                  {% else %}
                    ‚Äî
                  {% endif %}
                </td>
                <td>
                  <a href="{{ path('feedback_show', {'id': feedback.id}) }}" class="btn btn-sm btn-outline-warning rounded-pill">
                    <i class="bi bi-eye"></i> Voir
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="alert alert-warning text-center rounded-pill shadow-sm mt-4">
        <i class="bi bi-exclamation-triangle-fill"></i> Aucun feedback n√©gatif d√©tect√©.
      </div>
    {% endif %}

  </div>
</div>
  <a href="{{ path('feedback_pdf_negative') }}" class="btn btn-dark rounded-pill mb-4">
  üßæ T√©l√©charger les Feedbacks N√©gatifs en PDF
</a>
{% endblock %}
